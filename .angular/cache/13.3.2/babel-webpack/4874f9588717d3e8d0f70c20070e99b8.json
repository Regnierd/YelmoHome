{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/connection-server.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../header/header.component\";\nimport * as i4 from \"../footer/footer.component\";\nimport * as i5 from \"../../pipe/asterisk.pipe\";\nexport let ProfileComponent = /*#__PURE__*/(() => {\n  class ProfileComponent {\n    constructor(connectionServerService, router) {\n      this.connectionServerService = connectionServerService;\n      this.router = router;\n      this.userLogged = JSON.parse(localStorage.getItem(\"user\") || \"{}\");\n    }\n\n    ngOnInit() {\n      //Si el usuario no existe en el localStorage redirige al login\n      if (localStorage.getItem(\"user\") == null) {\n        this.router.navigate(['/login']);\n      }\n    }\n    /**\n     * Método que llama a la función del servicio update para actualizar\n     * los datos del usuario logueado\n     * @param name_user del usuario\n     * @param password del usuario\n     * @param email del usuario\n     */\n\n\n    updateUser(name_user, password, email) {\n      if (name_user == \"\") {\n        name_user = this.userLogged.name_user;\n      }\n\n      if (password == \"\") {\n        password = this.userLogged.password;\n      }\n\n      if (email == \"\") {\n        email = this.userLogged.email;\n      }\n\n      if (this.userLogged) {\n        //Enviamos los datos nuevos a la bd y los recibimos actualizado \n        this.connectionServerService.updateUser(this.userLogged.id_user, name_user, password, email).subscribe(datos => {\n          this.userLogged.name_user = datos[\"name_user\"];\n          this.userLogged.password = datos[\"password\"];\n          this.userLogged.email = datos[\"email\"];\n          localStorage.setItem(\"user\", JSON.stringify(this.userLogged));\n          this.router.navigate(['/profile']).then(() => {\n            window.location.reload();\n          });\n        });\n      }\n    }\n    /**\n     * Método que llama a la función del servicio deleteUser para eliminar\n     * el usuario logueado y llamamos a la función closeSession()\n     * @param id_user del usuario\n     */\n\n\n    deleteUser(id_user) {\n      this.connectionServerService.deleteUser(id_user).subscribe(datos => {\n        console.log(datos);\n\n        if (datos[\"resultado\"] == \"OK\") {\n          alert(datos[\"menssage\"]);\n        }\n      });\n      this.closeSession();\n    }\n    /**\n     * Funcion que elimina la sesión del usuario y redirige al login\n     */\n\n\n    closeSession() {\n      if (localStorage != null) {\n        localStorage.removeItem(\"user\");\n      }\n\n      this.router.navigate(['/login']);\n    }\n\n  }\n\n  ProfileComponent.ɵfac = function ProfileComponent_Factory(t) {\n    return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.ConnectionServerService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  ProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileComponent,\n    selectors: [[\"app-profile\"]],\n    decls: 32,\n    vars: 5,\n    consts: [[1, \"container-fluid\"], [1, \"row\"], [1, \"col-12\", \"col-lg-6\", \"column\"], [1, \"profile\"], [1, \"title-profile\"], [1, \"border\", \"mb-4\"], [1, \"container-profile\"], [\"method\", \"post\", 1, \"sign-form\"], [1, \"form-group\", \"mb-3\"], [\"for\", \"name\", 1, \"label\"], [\"type\", \"text\", \"name\", \"name\", 1, \"form-control\", 3, \"placeholder\"], [\"name\", \"\"], [\"type\", \"password\", \"name\", \"password\", 1, \"form-control\", 3, \"placeholder\"], [\"password\", \"\"], [\"type\", \"email\", \"name\", \"email\", 1, \"form-control\", 3, \"placeholder\"], [\"email\", \"\"], [1, \"form-group\", \"button\", \"mb-3\", \"py-2\"], [\"type\", \"button\", \"name\", \"delete\", 1, \"form-control\", \"btn-outline-danger\", \"rounded\", \"submit\", \"w-50\", \"px-3\", 3, \"click\"], [\"type\", \"button\", \"name\", \"registrar\", 1, \"form-control\", \"btn\", \"rounded\", \"submit\", \"px-3\", 3, \"click\"]],\n    template: function ProfileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r3 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelement(0, \"app-header\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"h2\", 4);\n        i0.ɵɵtext(6, \"T\\u00FA perfil\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"div\", 5);\n        i0.ɵɵelementStart(8, \"div\", 6);\n        i0.ɵɵelementStart(9, \"form\", 7);\n        i0.ɵɵelementStart(10, \"div\", 8);\n        i0.ɵɵelementStart(11, \"label\", 9);\n        i0.ɵɵtext(12, \"Nombre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"input\", 10, 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 8);\n        i0.ɵɵelementStart(16, \"label\", 9);\n        i0.ɵɵtext(17, \"Contrase\\u00F1a\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"input\", 12, 13);\n        i0.ɵɵpipe(20, \"asterisk\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 8);\n        i0.ɵɵelementStart(22, \"label\", 9);\n        i0.ɵɵtext(23, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"input\", 14, 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 16);\n        i0.ɵɵelementStart(27, \"button\", 17);\n        i0.ɵɵlistener(\"click\", function ProfileComponent_Template_button_click_27_listener() {\n          return ctx.deleteUser(ctx.userLogged.id_user);\n        });\n        i0.ɵɵtext(28, \"Eliminar cuenta\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 18);\n        i0.ɵɵlistener(\"click\", function ProfileComponent_Template_button_click_29_listener() {\n          i0.ɵɵrestoreView(_r3);\n\n          const _r0 = i0.ɵɵreference(14);\n\n          const _r1 = i0.ɵɵreference(19);\n\n          const _r2 = i0.ɵɵreference(25);\n\n          return ctx.updateUser(_r0.value, _r1.value, _r2.value);\n        });\n        i0.ɵɵtext(30, \"Actualizar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"app-footer\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.userLogged.name_user);\n        i0.ɵɵadvance(5);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(20, 3, ctx.userLogged.password));\n        i0.ɵɵadvance(6);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.userLogged.email);\n      }\n    },\n    directives: [i3.HeaderComponent, i4.FooterComponent],\n    pipes: [i5.AsteriskPipe],\n    styles: [\".container-fluid[_ngcontent-%COMP%]{background:white;margin-top:83px}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{display:flex;margin:auto}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{width:500px;display:flex;flex-direction:column;margin:auto;padding:30px}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .title-profile[_ngcontent-%COMP%]{margin-bottom:25px}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#e63636!important;border:1px solid #e63636!important;color:#fff!important;font-weight:600;width:200px}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:#ff5353!important;border:1px solid #ff5353!important}@media (min-width: 0px) and (max-width: 359.98px){.button[_ngcontent-%COMP%]{display:flex;flex-direction:column}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%!important}.button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:10px}}@media (min-width: 360px) and (max-width: 575.98px){.button[_ngcontent-%COMP%]{display:flex;flex-direction:column}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%!important}.button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:10px}}\"]\n  });\n  return ProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}